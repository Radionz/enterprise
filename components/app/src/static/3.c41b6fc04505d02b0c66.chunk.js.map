{"version":3,"sources":["webpack:///3.c41b6fc04505d02b0c66.chunk.js","webpack:///./src/common/components/Tutorial/index.js"],"names":["webpackJsonp","./src/common/components/Tutorial/index.js","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_getIterator2","_getIterator3","_getPrototypeOf","_getPrototypeOf2","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_react","_react2","_semanticUiReact","_mobxReact","_markdown","Tutorial","_React$Component","_ref","_temp","_this","_ret","this","_len","arguments","length","args","Array","_key","__proto__","call","apply","concat","state","initialRender","key","props","tutorialStore","initTutorial","id","nextProps","_props","title","basic","createElement","_tutorialStore$curren","currentTutorial","_tutorialStore$curren2","currentSteps","handlePreviousStep","handleNextStep","handleDone","isActive","currentStep","ctaStyle","step","anchor","size","content","elem","_step$offset","offset","targetElem","document","getElementById","rect","getBoundingClientRect","left","top","width","height","cta","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","next","done","c","axis","err","return","console","warn","bgPieces","push","className","style","right","bottom","ctaElem","stepActions","actions","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","action","name","href","target","rel","Button","secondary","compact","icon","Icon","contentStyle","dangerouslySetInnerHTML","__html","PlainRenderer","inverted","onClick","disabled","Component","inject","observer"],"mappings":"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","file":"3.c41b6fc04505d02b0c66.chunk.js","sourcesContent":["webpackJsonp([3],{\n\n/***/ \"./src/common/components/Tutorial/index.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _getIterator2 = __webpack_require__(\"./node_modules/babel-runtime/core-js/get-iterator.js\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nvar _getPrototypeOf = __webpack_require__(\"./node_modules/babel-runtime/core-js/object/get-prototype-of.js\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(\"./node_modules/babel-runtime/helpers/classCallCheck.js\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(\"./node_modules/babel-runtime/helpers/createClass.js\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(\"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(\"./node_modules/babel-runtime/helpers/inherits.js\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = __webpack_require__(\"./node_modules/react/react.js\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _semanticUiReact = __webpack_require__(\"./node_modules/semantic-ui-react/dist/es/index.js\");\n\nvar _mobxReact = __webpack_require__(\"./node_modules/mobx-react/index.js\");\n\nvar _markdown = __webpack_require__(\"./src/common/utils/markdown/index.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Tutorial = function (_React$Component) {\n  (0, _inherits3.default)(Tutorial, _React$Component);\n\n  function Tutorial() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    (0, _classCallCheck3.default)(this, Tutorial);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = (0, _possibleConstructorReturn3.default)(this, (_ref = Tutorial.__proto__ || (0, _getPrototypeOf2.default)(Tutorial)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n      initialRender: false\n    }, _temp), (0, _possibleConstructorReturn3.default)(_this, _ret);\n  }\n\n  (0, _createClass3.default)(Tutorial, [{\n    key: 'componentWillMount',\n    value: function componentWillMount() {}\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.props.tutorialStore.initTutorial(this.props.id);\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      if (this.props.id !== nextProps.id) {\n        nextProps.tutorialStore.initTutorial(nextProps.id);\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          title = _props.title,\n          tutorialStore = _props.tutorialStore,\n          basic = _props.basic;\n\n\n      if (this.state.initialRender) {\n        return _react2.default.createElement('div', null);\n      }\n\n      var _tutorialStore$curren = tutorialStore.currentTutorial,\n          currentTutorial = _tutorialStore$curren === undefined ? {} : _tutorialStore$curren,\n          _tutorialStore$curren2 = tutorialStore.currentSteps,\n          currentSteps = _tutorialStore$curren2 === undefined ? {} : _tutorialStore$curren2,\n          handlePreviousStep = tutorialStore.handlePreviousStep,\n          handleNextStep = tutorialStore.handleNextStep,\n          handleDone = tutorialStore.handleDone;\n      var isActive = currentTutorial.isActive,\n          currentStep = currentTutorial.currentStep;\n\n\n      if (!isActive) {\n        return _react2.default.createElement('div', null);\n      }\n\n      var ctaStyle = void 0;\n      var step = currentSteps[currentStep];\n      if (!step) {\n        return _react2.default.createElement('div', null);\n      }\n\n      var anchor = step.anchor,\n          size = step.size;\n      var content = step.content,\n          elem = step.elem,\n          _step$offset = step.offset,\n          offset = _step$offset === undefined ? 0 : _step$offset;\n\n      if (elem) {\n        var targetElem = document.getElementById(elem);\n        if (targetElem) {\n          var rect = targetElem.getBoundingClientRect();\n          anchor = [rect.left + offset, rect.top + offset];\n          size = [rect.width + offset * -2, rect.height + offset * -2];\n\n          if (step.cta) {\n            ctaStyle = {};\n            var _iteratorNormalCompletion = true;\n            var _didIteratorError = false;\n            var _iteratorError = undefined;\n\n            try {\n              for (var _iterator = (0, _getIterator3.default)(step.cta), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                var c = _step.value;\n\n                switch (c.axis) {\n                  case 'top':\n                    ctaStyle.top = rect.top + (c.offset || 0);\n                    break;\n                  case 'left':\n                    ctaStyle.left = rect.left + (c.offset || 0);\n                    break;\n                  case 'bottom':\n                    ctaStyle.top = rect.top + rect.height - (c.offset || 0);\n                    break;\n                  case 'right':\n                    ctaStyle.left = rect.left + rect.width - (c.offset || 0);\n                    break;\n                }\n              }\n            } catch (err) {\n              _didIteratorError = true;\n              _iteratorError = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion && _iterator.return) {\n                  _iterator.return();\n                }\n              } finally {\n                if (_didIteratorError) {\n                  throw _iteratorError;\n                }\n              }\n            }\n          }\n        } else {\n          console.warn('components/Tutorial', elem + ' element does not exist on the page!');\n        }\n      }\n\n      var bgPieces = [];\n      if (anchor && size) {\n        bgPieces.push(_react2.default.createElement('div', {\n          key: 'top-half',\n          className: 'Tutorial-bgPiece is-top',\n          style: {\n            top: 0,\n            left: 0,\n            right: 0,\n            height: anchor[1]\n          }\n        }));\n\n        bgPieces.push(_react2.default.createElement('div', {\n          key: 'bottom-half',\n          className: 'Tutorial-bgPiece is-bottom',\n          style: {\n            bottom: 0,\n            left: 0,\n            right: 0,\n            top: anchor[1] + size[1]\n          }\n        }));\n\n        bgPieces.push(_react2.default.createElement('div', {\n          key: 'left',\n          className: 'Tutorial-bgPiece is-left',\n          style: {\n            top: anchor[1],\n            left: 0,\n            width: anchor[0],\n            height: size[1]\n          }\n        }));\n\n        bgPieces.push(_react2.default.createElement('div', {\n          key: 'right',\n          className: 'Tutorial-bgPiece is-right',\n          style: {\n            top: anchor[1],\n            left: anchor[0] + size[0],\n            right: 0,\n            height: size[1]\n          }\n        }));\n      } else {\n        bgPieces.push(_react2.default.createElement('div', {\n          key: 'full',\n          className: 'Tutorial-bgPiece is-full',\n          style: {\n            top: 0,\n            right: 0,\n            left: 0,\n            bottom: 0\n          }\n        }));\n      }\n\n      var ctaElem = ctaStyle ? _react2.default.createElement('div', { className: 'Tutorial-cta', style: ctaStyle }) : null;\n\n      var stepActions = [];\n      if (step.actions) {\n        var _iteratorNormalCompletion2 = true;\n        var _didIteratorError2 = false;\n        var _iteratorError2 = undefined;\n\n        try {\n          for (var _iterator2 = (0, _getIterator3.default)(step.actions), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var action = _step2.value;\n\n            stepActions.push(_react2.default.createElement(\n              'a',\n              {\n                key: action.name,\n                href: action.href,\n                target: '_blank',\n                className: 'f-0 d-b mr-1',\n                rel: 'noopener noreferrer'\n              },\n              _react2.default.createElement(\n                _semanticUiReact.Button,\n                { secondary: true, size: 'small', compact: true },\n                action.icon ? _react2.default.createElement(\n                  'span',\n                  { className: 'mr-1' },\n                  _react2.default.createElement(_semanticUiReact.Icon, { name: action.icon })\n                ) : null,\n                action.name\n              )\n            ));\n          }\n        } catch (err) {\n          _didIteratorError2 = true;\n          _iteratorError2 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion2 && _iterator2.return) {\n              _iterator2.return();\n            }\n          } finally {\n            if (_didIteratorError2) {\n              throw _iteratorError2;\n            }\n          }\n        }\n      }\n\n      return _react2.default.createElement(\n        'div',\n        { className: 'Tutorial ai-c jc-c f fd-c ' + (basic || ctaElem ? 'is-basic' : '') },\n        _react2.default.createElement(\n          'div',\n          { className: 'Tutorial-content f-0', style: step.contentStyle || {} },\n          step.title || title ? _react2.default.createElement(\n            'h2',\n            { className: 'Tutorial-title' },\n            step.title || title\n          ) : null,\n          content ? _react2.default.createElement('div', {\n            className: 'Tutorial-contentInner',\n            dangerouslySetInnerHTML: { __html: (0, _markdown.PlainRenderer)(content) }\n          }) : null,\n          _react2.default.createElement(\n            'div',\n            { className: 'Tutorial-actions f' },\n            _react2.default.createElement(\n              'div',\n              { className: 'f-0 mr-1' },\n              _react2.default.createElement(\n                _semanticUiReact.Button,\n                {\n                  basic: true,\n                  inverted: true,\n                  compact: true,\n                  size: 'small',\n                  onClick: handlePreviousStep,\n                  disabled: currentStep === 0\n                },\n                'Previous'\n              )\n            ),\n            !ctaElem ? _react2.default.createElement(\n              'div',\n              { className: 'f-0 mr-1' },\n              _react2.default.createElement(\n                _semanticUiReact.Button,\n                { secondary: true, compact: true, size: 'small', onClick: handleNextStep },\n                currentStep >= currentSteps.length - 1 ? 'Finish & Close' : 'Next',\n                _react2.default.createElement(\n                  'span',\n                  { className: 'ml-1' },\n                  currentStep >= currentSteps.length - 1 ? _react2.default.createElement(_semanticUiReact.Icon, { name: 'check' }) : _react2.default.createElement(_semanticUiReact.Icon, { name: 'arrow right' })\n                )\n              )\n            ) : null,\n            stepActions\n          ),\n          _react2.default.createElement(\n            'div',\n            { className: 'Tutorial-close', onClick: handleDone },\n            _react2.default.createElement(_semanticUiReact.Icon, { name: 'remove' })\n          )\n        ),\n        ctaElem,\n        bgPieces\n      );\n    }\n  }]);\n  return Tutorial;\n}(_react2.default.Component);\n\nexports.default = (0, _mobxReact.inject)('tutorialStore')((0, _mobxReact.observer)(Tutorial));\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 3.c41b6fc04505d02b0c66.chunk.js","import React from 'react';\nimport { Button, Icon } from 'semantic-ui-react';\nimport { inject, observer } from 'mobx-react';\n\nimport { PlainRenderer } from 'common/utils/markdown';\n\nclass Tutorial extends React.Component {\n  state = {\n    initialRender: false,\n  };\n\n  componentWillMount() {}\n\n  componentDidMount() {\n    this.props.tutorialStore.initTutorial(this.props.id);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.id !== nextProps.id) {\n      nextProps.tutorialStore.initTutorial(nextProps.id);\n    }\n  }\n\n  render() {\n    const { title, tutorialStore, basic } = this.props;\n\n    if (this.state.initialRender) {\n      return <div />;\n    }\n\n    const {\n      currentTutorial = {},\n      currentSteps = {},\n      handlePreviousStep,\n      handleNextStep,\n      handleDone,\n    } = tutorialStore;\n\n    const { isActive, currentStep } = currentTutorial;\n\n    if (!isActive) {\n      return <div />;\n    }\n\n    let ctaStyle;\n    const step = currentSteps[currentStep];\n    if (!step) {\n      return <div />;\n    }\n\n    let { anchor, size } = step;\n    const { content, elem, offset = 0 } = step;\n    if (elem) {\n      const targetElem = document.getElementById(elem);\n      if (targetElem) {\n        const rect = targetElem.getBoundingClientRect();\n        anchor = [rect.left + offset, rect.top + offset];\n        size = [rect.width + offset * -2, rect.height + offset * -2];\n\n        if (step.cta) {\n          ctaStyle = {};\n          for (const c of step.cta) {\n            switch (c.axis) {\n              case 'top':\n                ctaStyle.top = rect.top + (c.offset || 0);\n                break;\n              case 'left':\n                ctaStyle.left = rect.left + (c.offset || 0);\n                break;\n              case 'bottom':\n                ctaStyle.top = rect.top + rect.height - (c.offset || 0);\n                break;\n              case 'right':\n                ctaStyle.left = rect.left + rect.width - (c.offset || 0);\n                break;\n            }\n          }\n        }\n      } else {\n        console.warn('components/Tutorial', `${elem} element does not exist on the page!`);\n      }\n    }\n\n    const bgPieces = [];\n    if (anchor && size) {\n      bgPieces.push(\n        <div\n          key=\"top-half\"\n          className=\"Tutorial-bgPiece is-top\"\n          style={{\n            top: 0,\n            left: 0,\n            right: 0,\n            height: anchor[1],\n          }}\n        />\n      );\n\n      bgPieces.push(\n        <div\n          key=\"bottom-half\"\n          className=\"Tutorial-bgPiece is-bottom\"\n          style={{\n            bottom: 0,\n            left: 0,\n            right: 0,\n            top: anchor[1] + size[1],\n          }}\n        />\n      );\n\n      bgPieces.push(\n        <div\n          key=\"left\"\n          className=\"Tutorial-bgPiece is-left\"\n          style={{\n            top: anchor[1],\n            left: 0,\n            width: anchor[0],\n            height: size[1],\n          }}\n        />\n      );\n\n      bgPieces.push(\n        <div\n          key=\"right\"\n          className=\"Tutorial-bgPiece is-right\"\n          style={{\n            top: anchor[1],\n            left: anchor[0] + size[0],\n            right: 0,\n            height: size[1],\n          }}\n        />\n      );\n    } else {\n      bgPieces.push(\n        <div\n          key=\"full\"\n          className=\"Tutorial-bgPiece is-full\"\n          style={{\n            top: 0,\n            right: 0,\n            left: 0,\n            bottom: 0,\n          }}\n        />\n      );\n    }\n\n    const ctaElem = ctaStyle ? <div className=\"Tutorial-cta\" style={ctaStyle} /> : null;\n\n    const stepActions = [];\n    if (step.actions) {\n      for (const action of step.actions) {\n        stepActions.push(\n          <a\n            key={action.name}\n            href={action.href}\n            target=\"_blank\"\n            className=\"f-0 d-b mr-1\"\n            rel=\"noopener noreferrer\"\n          >\n            <Button secondary size=\"small\" compact>\n              {action.icon\n                ? <span className=\"mr-1\">\n                    <Icon name={action.icon} />\n                  </span>\n                : null}\n\n              {action.name}\n            </Button>\n          </a>\n        );\n      }\n    }\n\n    return (\n      <div className={`Tutorial ai-c jc-c f fd-c ${basic || ctaElem ? 'is-basic' : ''}`}>\n        <div className=\"Tutorial-content f-0\" style={step.contentStyle || {}}>\n          {step.title || title ? <h2 className=\"Tutorial-title\">{step.title || title}</h2> : null}\n\n          {content\n            ? <div\n                className=\"Tutorial-contentInner\"\n                dangerouslySetInnerHTML={{ __html: PlainRenderer(content) }}\n              />\n            : null}\n\n          <div className=\"Tutorial-actions f\">\n            <div className=\"f-0 mr-1\">\n              <Button\n                basic\n                inverted\n                compact\n                size=\"small\"\n                onClick={handlePreviousStep}\n                disabled={currentStep === 0}\n              >\n                Previous\n              </Button>\n            </div>\n\n            {!ctaElem\n              ? <div className=\"f-0 mr-1\">\n                  <Button secondary compact size=\"small\" onClick={handleNextStep}>\n                    {currentStep >= currentSteps.length - 1 ? 'Finish & Close' : 'Next'}\n\n                    <span className=\"ml-1\">\n                      {currentStep >= currentSteps.length - 1\n                        ? <Icon name=\"check\" />\n                        : <Icon name=\"arrow right\" />}\n                    </span>\n                  </Button>\n                </div>\n              : null}\n\n            {stepActions}\n          </div>\n\n          <div className=\"Tutorial-close\" onClick={handleDone}>\n            <Icon name=\"remove\" />\n          </div>\n        </div>\n\n        {ctaElem}\n        {bgPieces}\n      </div>\n    );\n  }\n}\n\nexport default inject('tutorialStore')(observer(Tutorial));\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/components/Tutorial/index.js"],"sourceRoot":""}